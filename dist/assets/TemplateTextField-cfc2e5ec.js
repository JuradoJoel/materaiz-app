import{aA as V,j as X,s as Ot,a_ as Rt,a8 as Ut,r as Mt,m as Pt}from"./index-64dae846.js";import{G as ut}from"./CartQuantityControl-f19e5cf7.js";import{c as Nt,T as Bt}from"./TextField-7ee1efa9.js";var he=e=>e.type==="checkbox",ae=e=>e instanceof Date,I=e=>e==null;const lt=e=>typeof e=="object";var O=e=>!I(e)&&!Array.isArray(e)&&lt(e)&&!ae(e),ot=e=>O(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,It=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dt=(e,r)=>e.has(It(r)),pt=e=>{const r=e.constructor&&e.constructor.prototype;return O(r)&&r.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let r;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(!(Oe&&(e instanceof Blob||i))&&(t||O(e)))if(r=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!pt(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=U(e[n]));else return e;return r}var xe=e=>/^\w*$/.test(e),L=e=>e===void 0,Re=e=>Array.isArray(e)?e.filter(Boolean):[],Ue=e=>Re(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,r,t)=>{if(!r||!O(e))return t;const i=(xe(r)?[r]:Ue(r)).reduce((n,u)=>I(n)?n:n[u],e);return L(i)||i===e?L(e[r])?t:e[r]:i},H=e=>typeof e=="boolean",E=(e,r,t)=>{let i=-1;const n=xe(r)?[r]:Ue(r),u=n.length,o=u-1;for(;++i<u;){const f=n[i];let F=t;if(i!==o){const _=e[f];F=O(_)||Array.isArray(_)?_:isNaN(+n[i+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=F,e=e[f]}};const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Y={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Me=V.createContext(null);Me.displayName="HookFormContext";const Ae=()=>V.useContext(Me),Wt=e=>{const{children:r,...t}=e;return V.createElement(Me.Provider,{value:t},r)};var ft=(e,r,t,i=!0)=>{const n={defaultValues:r._defaultValues};for(const u in e)Object.defineProperty(n,u,{get:()=>{const o=u;return r._proxyFormState[o]!==Y.all&&(r._proxyFormState[o]=!i||Y.all),t&&(t[o]=!0),e[o]}});return n};const Pe=typeof window<"u"?V.useLayoutEffect:V.useEffect;function qt(e){const r=Ae(),{control:t=r.control,disabled:i,name:n,exact:u}=e||{},[o,f]=V.useState(t._formState),F=V.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Pe(()=>t._subscribe({name:n,formState:F.current,exact:u,callback:_=>{!i&&f({...t._formState,..._})}}),[n,i,u]),V.useEffect(()=>{F.current.isValid&&t._setValid(!0)},[t]),V.useMemo(()=>ft(o,t,F.current,!1),[o,t])}var Q=e=>typeof e=="string",ct=(e,r,t,i,n)=>Q(e)?(i&&r.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(u=>(i&&r.watch.add(u),y(t,u))):(i&&(r.watchAll=!0),t),Le=e=>I(e)||!lt(e);function ee(e,r,t=new WeakSet){if(Le(e)||Le(r))return e===r;if(ae(e)&&ae(r))return e.getTime()===r.getTime();const i=Object.keys(e),n=Object.keys(r);if(i.length!==n.length)return!1;if(t.has(e)||t.has(r))return!0;t.add(e),t.add(r);for(const u of i){const o=e[u];if(!n.includes(u))return!1;if(u!=="ref"){const f=r[u];if(ae(o)&&ae(f)||O(o)&&O(f)||Array.isArray(o)&&Array.isArray(f)?!ee(o,f,t):o!==f)return!1}}return!0}function Ht(e){const r=Ae(),{control:t=r.control,name:i,defaultValue:n,disabled:u,exact:o,compute:f}=e||{},F=V.useRef(n),_=V.useRef(f),g=V.useRef(void 0);_.current=f;const A=V.useMemo(()=>t._getWatch(i,F.current),[t,i]),[b,G]=V.useState(_.current?_.current(A):A);return Pe(()=>t._subscribe({name:i,formState:{values:!0},exact:o,callback:q=>{if(!u){const S=ct(i,t._names,q.values||t._formValues,!1,F.current);if(_.current){const P=_.current(S);ee(P,g.current)||(G(P),g.current=P)}else G(S)}}}),[t,u,i,o]),V.useEffect(()=>t._removeUnmounted()),b}function jt(e){const r=Ae(),{name:t,disabled:i,control:n=r.control,shouldUnregister:u,defaultValue:o}=e,f=dt(n._names.array,t),F=V.useMemo(()=>y(n._formValues,t,y(n._defaultValues,t,o)),[n,t,o]),_=Ht({control:n,name:t,defaultValue:F,exact:!0}),g=qt({control:n,name:t,exact:!0}),A=V.useRef(e),b=V.useRef(n.register(t,{...e.rules,value:_,...H(e.disabled)?{disabled:e.disabled}:{}}));A.current=e;const G=V.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(g.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(g.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(g.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(g.validatingFields,t)},error:{enumerable:!0,get:()=>y(g.errors,t)}}),[g,t]),q=V.useCallback(m=>b.current.onChange({target:{value:ot(m),name:t},type:be.CHANGE}),[t]),S=V.useCallback(()=>b.current.onBlur({target:{value:y(n._formValues,t),name:t},type:be.BLUR}),[t,n._formValues]),P=V.useCallback(m=>{const N=y(n._fields,t);N&&m&&(N._f.ref={focus:()=>m.focus&&m.focus(),select:()=>m.select&&m.select(),setCustomValidity:M=>m.setCustomValidity(M),reportValidity:()=>m.reportValidity()})},[n._fields,t]),ne=V.useMemo(()=>({name:t,value:_,...H(i)||g.disabled?{disabled:g.disabled||i}:{},onChange:q,onBlur:S,ref:P}),[t,i,g.disabled,q,S,P,_]);return V.useEffect(()=>{const m=n._options.shouldUnregister||u;n.register(t,{...A.current.rules,...H(A.current.disabled)?{disabled:A.current.disabled}:{}});const N=(M,C)=>{const te=y(n._fields,M);te&&te._f&&(te._f.mount=C)};if(N(t,!0),m){const M=U(y(n._options.defaultValues,t));E(n._defaultValues,t,M),L(y(n._formValues,t))&&E(n._formValues,t,M)}return!f&&n.register(t),()=>{(f?m&&!n._state.action:m)?n.unregister(t):N(t,!1)}},[t,n,f,u]),V.useEffect(()=>{n._setDisabledField({disabled:i,name:t})},[i,t,n]),V.useMemo(()=>({field:ne,formState:g,fieldState:G}),[ne,g,G])}const fr=e=>e.render(jt(e));var yt=(e,r,t,i,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},ce=e=>Array.isArray(e)?e:[e],ze=()=>{let e=[];return{get observers(){return e},next:n=>{for(const u of e)u.next&&u.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(u=>u!==n)}}),unsubscribe:()=>{e=[]}}},W=e=>O(e)&&!Object.keys(e).length,Ne=e=>e.type==="file",K=e=>typeof e=="function",_e=e=>{if(!Oe)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ht=e=>e.type==="select-multiple",Be=e=>e.type==="radio",Gt=e=>Be(e)||he(e),Te=e=>_e(e)&&e.isConnected;function $t(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=L(e)?i++:e[r[i++]];return e}function Yt(e){for(const r in e)if(e.hasOwnProperty(r)&&!L(e[r]))return!1;return!0}function R(e,r){const t=Array.isArray(r)?r:xe(r)?[r]:Ue(r),i=t.length===1?e:$t(e,t),n=t.length-1,u=t[n];return i&&delete i[u],n!==0&&(O(i)&&W(i)||Array.isArray(i)&&Yt(i))&&R(e,t.slice(0,-1)),e}var gt=e=>{for(const r in e)if(K(e[r]))return!0;return!1};function Ve(e,r={}){const t=Array.isArray(e);if(O(e)||t)for(const i in e)Array.isArray(e[i])||O(e[i])&&!gt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},Ve(e[i],r[i])):I(e[i])||(r[i]=!0);return r}function vt(e,r,t){const i=Array.isArray(e);if(O(e)||i)for(const n in e)Array.isArray(e[n])||O(e[n])&&!gt(e[n])?L(r)||Le(t[n])?t[n]=Array.isArray(e[n])?Ve(e[n],[]):{...Ve(e[n])}:vt(e[n],I(r)?{}:r[n],t[n]):t[n]=!ee(e[n],r[n]);return t}var de=(e,r)=>vt(e,r,Ve(r));const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var mt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je},bt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>L(e)?e:r?e===""?NaN:e&&+e:t&&Q(e)?new Date(e):i?i(e):e;const Xe={isValid:!1,value:null};var _t=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Xe):Xe;function Ze(e){const r=e.ref;return Ne(r)?r.files:Be(r)?_t(e.refs).value:ht(r)?[...r.selectedOptions].map(({value:t})=>t):he(r)?mt(e.refs).value:bt(L(r.value)?e.ref.value:r.value,e)}var Kt=(e,r,t,i)=>{const n={};for(const u of e){const o=y(r,u);o&&E(n,u,o._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},Fe=e=>e instanceof RegExp,fe=e=>L(e)?e:Fe(e)?e.source:O(e)?Fe(e.value)?e.value.source:e.value:e,et=e=>({isOnSubmit:!e||e===Y.onSubmit,isOnBlur:e===Y.onBlur,isOnChange:e===Y.onChange,isOnAll:e===Y.all,isOnTouch:e===Y.onTouched});const tt="AsyncFunction";var zt=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===tt||O(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===tt)),Jt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),rt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,r,t,i)=>{for(const n of t||Object.keys(e)){const u=y(e,n);if(u){const{_f:o,...f}=u;if(o){if(o.refs&&o.refs[0]&&r(o.refs[0],n)&&!i)return!0;if(o.ref&&r(o.ref,o.name)&&!i)return!0;if(ye(f,r))break}else if(O(f)&&ye(f,r))break}}};function st(e,r,t){const i=y(e,t);if(i||xe(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const u=n.join("."),o=y(r,u),f=y(e,u);if(o&&!Array.isArray(o)&&t!==u)return{name:t};if(f&&f.type)return{name:u,error:f};if(f&&f.root&&f.root.type)return{name:`${u}.root`,error:f.root};n.pop()}return{name:t}}var Qt=(e,r,t,i)=>{t(e);const{name:n,...u}=e;return W(u)||Object.keys(u).length>=Object.keys(r).length||Object.keys(u).find(o=>r[o]===(!i||Y.all))},Xt=(e,r,t)=>!e||!r||e===r||ce(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i))),Zt=(e,r,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,er=(e,r)=>!Re(y(e,r)).length&&R(e,r),tr=(e,r,t)=>{const i=ce(y(e,t));return E(i,"root",r[t]),E(e,t,i),e},me=e=>Q(e);function it(e,r,t="validate"){if(me(e)||Array.isArray(e)&&e.every(me)||H(e)&&!e)return{type:t,message:me(e)?e:"",ref:r}}var le=e=>O(e)&&!Fe(e)?e:{value:e,message:""},at=async(e,r,t,i,n,u)=>{const{ref:o,refs:f,required:F,maxLength:_,minLength:g,min:A,max:b,pattern:G,validate:q,name:S,valueAsNumber:P,mount:ne}=e._f,m=y(t,S);if(!ne||r.has(S))return{};const N=f?f[0]:o,M=x=>{n&&N.reportValidity&&(N.setCustomValidity(H(x)?"":x||""),N.reportValidity())},C={},te=Be(o),re=he(o),we=te||re,$=(P||Ne(o))&&L(o.value)&&L(m)||_e(o)&&o.value===""||m===""||Array.isArray(m)&&!m.length,ie=yt.bind(null,S,i,C),z=(x,D,T,B=Z.maxLength,p=Z.minLength)=>{const J=x?D:T;C[S]={type:x?B:p,message:J,ref:o,...ie(x?B:p,J)}};if(u?!Array.isArray(m)||!m.length:F&&(!we&&($||I(m))||H(m)&&!m||re&&!mt(f).isValid||te&&!_t(f).isValid)){const{value:x,message:D}=me(F)?{value:!!F,message:F}:le(F);if(x&&(C[S]={type:Z.required,message:D,ref:N,...ie(Z.required,D)},!i))return M(D),C}if(!$&&(!I(A)||!I(b))){let x,D;const T=le(b),B=le(A);if(!I(m)&&!isNaN(m)){const p=o.valueAsNumber||m&&+m;I(T.value)||(x=p>T.value),I(B.value)||(D=p<B.value)}else{const p=o.valueAsDate||new Date(m),J=ge=>new Date(new Date().toDateString()+" "+ge),oe=o.type=="time",ue=o.type=="week";Q(T.value)&&m&&(x=oe?J(m)>J(T.value):ue?m>T.value:p>new Date(T.value)),Q(B.value)&&m&&(D=oe?J(m)<J(B.value):ue?m<B.value:p<new Date(B.value))}if((x||D)&&(z(!!x,T.message,B.message,Z.max,Z.min),!i))return M(C[S].message),C}if((_||g)&&!$&&(Q(m)||u&&Array.isArray(m))){const x=le(_),D=le(g),T=!I(x.value)&&m.length>+x.value,B=!I(D.value)&&m.length<+D.value;if((T||B)&&(z(T,x.message,D.message),!i))return M(C[S].message),C}if(G&&!$&&Q(m)){const{value:x,message:D}=le(G);if(Fe(x)&&!m.match(x)&&(C[S]={type:Z.pattern,message:D,ref:o,...ie(Z.pattern,D)},!i))return M(D),C}if(q){if(K(q)){const x=await q(m,t),D=it(x,N);if(D&&(C[S]={...D,...ie(Z.validate,D.message)},!i))return M(D.message),C}else if(O(q)){let x={};for(const D in q){if(!W(x)&&!i)break;const T=it(await q[D](m,t),N,D);T&&(x={...T,...ie(D,T.message)},M(T.message),i&&(C[S]=x))}if(!W(x)&&(C[S]={ref:N,...x},!i))return C}}return M(!0),C};const rr={mode:Y.onSubmit,reValidateMode:Y.onChange,shouldFocusError:!0};function sr(e={}){let r={...rr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:K(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},n=O(r.defaultValues)||O(r.values)?U(r.defaultValues||r.values)||{}:{},u=r.shouldUnregister?{}:U(n),o={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},F,_=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let A={...g};const b={array:ze(),state:ze()},G=r.criteriaMode===Y.all,q=s=>a=>{clearTimeout(_),_=setTimeout(s,a)},S=async s=>{if(!r.disabled&&(g.isValid||A.isValid||s)){const a=r.resolver?W((await re()).errors):await $(i,!0);a!==t.isValid&&b.state.next({isValid:a})}},P=(s,a)=>{!r.disabled&&(g.isValidating||g.validatingFields||A.isValidating||A.validatingFields)&&((s||Array.from(f.mount)).forEach(l=>{l&&(a?E(t.validatingFields,l,a):R(t.validatingFields,l))}),b.state.next({validatingFields:t.validatingFields,isValidating:!W(t.validatingFields)}))},ne=(s,a=[],l,h,c=!0,d=!0)=>{if(h&&l&&!r.disabled){if(o.action=!0,d&&Array.isArray(y(i,s))){const v=l(y(i,s),h.argA,h.argB);c&&E(i,s,v)}if(d&&Array.isArray(y(t.errors,s))){const v=l(y(t.errors,s),h.argA,h.argB);c&&E(t.errors,s,v),er(t.errors,s)}if((g.touchedFields||A.touchedFields)&&d&&Array.isArray(y(t.touchedFields,s))){const v=l(y(t.touchedFields,s),h.argA,h.argB);c&&E(t.touchedFields,s,v)}(g.dirtyFields||A.dirtyFields)&&(t.dirtyFields=de(n,u)),b.state.next({name:s,isDirty:z(s,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(u,s,a)},m=(s,a)=>{E(t.errors,s,a),b.state.next({errors:t.errors})},N=s=>{t.errors=s,b.state.next({errors:t.errors,isValid:!1})},M=(s,a,l,h)=>{const c=y(i,s);if(c){const d=y(u,s,L(l)?y(n,s):l);L(d)||h&&h.defaultChecked||a?E(u,s,a?d:Ze(c._f)):T(s,d),o.mount&&S()}},C=(s,a,l,h,c)=>{let d=!1,v=!1;const w={name:s};if(!r.disabled){if(!l||h){(g.isDirty||A.isDirty)&&(v=t.isDirty,t.isDirty=w.isDirty=z(),d=v!==w.isDirty);const k=ee(y(n,s),a);v=!!y(t.dirtyFields,s),k?R(t.dirtyFields,s):E(t.dirtyFields,s,!0),w.dirtyFields=t.dirtyFields,d=d||(g.dirtyFields||A.dirtyFields)&&v!==!k}if(l){const k=y(t.touchedFields,s);k||(E(t.touchedFields,s,l),w.touchedFields=t.touchedFields,d=d||(g.touchedFields||A.touchedFields)&&k!==l)}d&&c&&b.state.next(w)}return d?w:{}},te=(s,a,l,h)=>{const c=y(t.errors,s),d=(g.isValid||A.isValid)&&H(a)&&t.isValid!==a;if(r.delayError&&l?(F=q(()=>m(s,l)),F(r.delayError)):(clearTimeout(_),F=null,l?E(t.errors,s,l):R(t.errors,s)),(l?!ee(c,l):c)||!W(h)||d){const v={...h,...d&&H(a)?{isValid:a}:{},errors:t.errors,name:s};t={...t,...v},b.state.next(v)}},re=async s=>{P(s,!0);const a=await r.resolver(u,r.context,Kt(s||f.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return P(s),a},we=async s=>{const{errors:a}=await re(s);if(s)for(const l of s){const h=y(a,l);h?E(t.errors,l,h):R(t.errors,l)}else t.errors=a;return a},$=async(s,a,l={valid:!0})=>{for(const h in s){const c=s[h];if(c){const{_f:d,...v}=c;if(d){const w=f.array.has(d.name),k=c._f&&zt(c._f);k&&g.validatingFields&&P([h],!0);const j=await at(c,f.disabled,u,G,r.shouldUseNativeValidation&&!a,w);if(k&&g.validatingFields&&P([h]),j[d.name]&&(l.valid=!1,a))break;!a&&(y(j,d.name)?w?tr(t.errors,j,d.name):E(t.errors,d.name,j[d.name]):R(t.errors,d.name))}!W(v)&&await $(v,a,l)}}return l.valid},ie=()=>{for(const s of f.unMount){const a=y(i,s);a&&(a._f.refs?a._f.refs.every(l=>!Te(l)):!Te(a._f.ref))&&De(s)}f.unMount=new Set},z=(s,a)=>!r.disabled&&(s&&a&&E(u,s,a),!ee(ge(),n)),x=(s,a,l)=>ct(s,f,{...o.mount?u:L(a)?n:Q(s)?{[s]:a}:a},l,a),D=s=>Re(y(o.mount?u:n,s,r.shouldUnregister?y(n,s,[]):[])),T=(s,a,l={})=>{const h=y(i,s);let c=a;if(h){const d=h._f;d&&(!d.disabled&&E(u,s,bt(a,d)),c=_e(d.ref)&&I(a)?"":a,ht(d.ref)?[...d.ref.options].forEach(v=>v.selected=c.includes(v.value)):d.refs?he(d.ref)?d.refs.forEach(v=>{(!v.defaultChecked||!v.disabled)&&(Array.isArray(c)?v.checked=!!c.find(w=>w===v.value):v.checked=c===v.value||!!c)}):d.refs.forEach(v=>v.checked=v.value===c):Ne(d.ref)?d.ref.value="":(d.ref.value=c,d.ref.type||b.state.next({name:s,values:U(u)})))}(l.shouldDirty||l.shouldTouch)&&C(s,c,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(s)},B=(s,a,l)=>{for(const h in a){if(!a.hasOwnProperty(h))return;const c=a[h],d=s+"."+h,v=y(i,d);(f.array.has(s)||O(c)||v&&!v._f)&&!ae(c)?B(d,c,l):T(d,c,l)}},p=(s,a,l={})=>{const h=y(i,s),c=f.array.has(s),d=U(a);E(u,s,d),c?(b.array.next({name:s,values:U(u)}),(g.isDirty||g.dirtyFields||A.isDirty||A.dirtyFields)&&l.shouldDirty&&b.state.next({name:s,dirtyFields:de(n,u),isDirty:z(s,d)})):h&&!h._f&&!I(d)?B(s,d,l):T(s,d,l),rt(s,f)&&b.state.next({...t,name:s}),b.state.next({name:o.mount?s:void 0,values:U(u)})},J=async s=>{o.mount=!0;const a=s.target;let l=a.name,h=!0;const c=y(i,l),d=k=>{h=Number.isNaN(k)||ae(k)&&isNaN(k.getTime())||ee(k,y(u,l,k))},v=et(r.mode),w=et(r.reValidateMode);if(c){let k,j;const ve=a.type?Ze(c._f):ot(s),se=s.type===be.BLUR||s.type===be.FOCUS_OUT,Ct=!Jt(c._f)&&!r.resolver&&!y(t.errors,l)&&!c._f.deps||Zt(se,y(t.touchedFields,l),t.isSubmitted,w,v),Se=rt(l,f,se);E(u,l,ve),se?(!a||!a.readOnly)&&(c._f.onBlur&&c._f.onBlur(s),F&&F(0)):c._f.onChange&&c._f.onChange(s);const Ce=C(l,ve,se),Tt=!W(Ce)||Se;if(!se&&b.state.next({name:l,type:s.type,values:U(u)}),Ct)return(g.isValid||A.isValid)&&(r.mode==="onBlur"?se&&S():se||S()),Tt&&b.state.next({name:l,...Se?{}:Ce});if(!se&&Se&&b.state.next({...t}),r.resolver){const{errors:Ye}=await re([l]);if(d(ve),h){const Lt=st(t.errors,i,l),Ke=st(Ye,i,Lt.name||l);k=Ke.error,l=Ke.name,j=W(Ye)}}else P([l],!0),k=(await at(c,f.disabled,u,G,r.shouldUseNativeValidation))[l],P([l]),d(ve),h&&(k?j=!1:(g.isValid||A.isValid)&&(j=await $(i,!0)));h&&(c._f.deps&&ue(c._f.deps),te(l,j,k,Ce))}},oe=(s,a)=>{if(y(t.errors,a)&&s.focus)return s.focus(),1},ue=async(s,a={})=>{let l,h;const c=ce(s);if(r.resolver){const d=await we(L(s)?s:c);l=W(d),h=s?!c.some(v=>y(d,v)):l}else s?(h=(await Promise.all(c.map(async d=>{const v=y(i,d);return await $(v&&v._f?{[d]:v}:v)}))).every(Boolean),!(!h&&!t.isValid)&&S()):h=l=await $(i);return b.state.next({...!Q(s)||(g.isValid||A.isValid)&&l!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!h&&ye(i,oe,s?c:f.mount),h},ge=s=>{const a={...o.mount?u:n};return L(s)?a:Q(s)?y(a,s):s.map(l=>y(a,l))},Ie=(s,a)=>({invalid:!!y((a||t).errors,s),isDirty:!!y((a||t).dirtyFields,s),error:y((a||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((a||t).touchedFields,s)}),xt=s=>{s&&ce(s).forEach(a=>R(t.errors,a)),b.state.next({errors:s?t.errors:{}})},pe=(s,a,l)=>{const h=(y(i,s,{_f:{}})._f||{}).ref,c=y(t.errors,s)||{},{ref:d,message:v,type:w,...k}=c;E(t.errors,s,{...k,...a,ref:h}),b.state.next({name:s,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&h&&h.focus&&h.focus()},At=(s,a)=>K(s)?b.state.subscribe({next:l=>"values"in l&&s(x(void 0,a),l)}):x(s,a,!0),We=s=>b.state.subscribe({next:a=>{Xt(s.name,a.name,s.exact)&&Qt(a,s.formState||g,St,s.reRenderRoot)&&s.callback({values:{...u},...t,...a,defaultValues:n})}}).unsubscribe,wt=s=>(o.mount=!0,A={...A,...s.formState},We({...s,formState:A})),De=(s,a={})=>{for(const l of s?ce(s):f.mount)f.mount.delete(l),f.array.delete(l),a.keepValue||(R(i,l),R(u,l)),!a.keepError&&R(t.errors,l),!a.keepDirty&&R(t.dirtyFields,l),!a.keepTouched&&R(t.touchedFields,l),!a.keepIsValidating&&R(t.validatingFields,l),!r.shouldUnregister&&!a.keepDefaultValue&&R(n,l);b.state.next({values:U(u)}),b.state.next({...t,...a.keepDirty?{isDirty:z()}:{}}),!a.keepIsValid&&S()},qe=({disabled:s,name:a})=>{(H(s)&&o.mount||s||f.disabled.has(a))&&(s?f.disabled.add(a):f.disabled.delete(a))},Ee=(s,a={})=>{let l=y(i,s);const h=H(a.disabled)||H(r.disabled);return E(i,s,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:s}},name:s,mount:!0,...a}}),f.mount.add(s),l?qe({disabled:H(a.disabled)?a.disabled:r.disabled,name:s}):M(s,!0,a.value),{...h?{disabled:a.disabled||r.disabled}:{},...r.progressive?{required:!!a.required,min:fe(a.min),max:fe(a.max),minLength:fe(a.minLength),maxLength:fe(a.maxLength),pattern:fe(a.pattern)}:{},name:s,onChange:J,onBlur:J,ref:c=>{if(c){Ee(s,a),l=y(i,s);const d=L(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,v=Gt(d),w=l._f.refs||[];if(v?w.find(k=>k===d):d===l._f.ref)return;E(i,s,{_f:{...l._f,...v?{refs:[...w.filter(Te),d,...Array.isArray(y(n,s))?[{}]:[]],ref:{type:d.type,name:s}}:{ref:d}}}),M(s,!1,void 0,d)}else l=y(i,s,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(dt(f.array,s)&&o.action)&&f.unMount.add(s)}}},ke=()=>r.shouldFocusError&&ye(i,oe,f.mount),Dt=s=>{H(s)&&(b.state.next({disabled:s}),ye(i,(a,l)=>{const h=y(i,l);h&&(a.disabled=h._f.disabled||s,Array.isArray(h._f.refs)&&h._f.refs.forEach(c=>{c.disabled=h._f.disabled||s}))},0,!1))},He=(s,a)=>async l=>{let h;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let c=U(u);if(b.state.next({isSubmitting:!0}),r.resolver){const{errors:d,values:v}=await re();t.errors=d,c=U(v)}else await $(i);if(f.disabled.size)for(const d of f.disabled)R(c,d);if(R(t.errors,"root"),W(t.errors)){b.state.next({errors:{}});try{await s(c,l)}catch(d){h=d}}else a&&await a({...t.errors},l),ke(),setTimeout(ke);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(t.errors)&&!h,submitCount:t.submitCount+1,errors:t.errors}),h)throw h},Et=(s,a={})=>{y(i,s)&&(L(a.defaultValue)?p(s,U(y(n,s))):(p(s,a.defaultValue),E(n,s,U(a.defaultValue))),a.keepTouched||R(t.touchedFields,s),a.keepDirty||(R(t.dirtyFields,s),t.isDirty=a.defaultValue?z(s,U(y(n,s))):z()),a.keepError||(R(t.errors,s),g.isValid&&S()),b.state.next({...t}))},je=(s,a={})=>{const l=s?U(s):n,h=U(l),c=W(s),d=c?n:h;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues){const v=new Set([...f.mount,...Object.keys(de(n,u))]);for(const w of Array.from(v))y(t.dirtyFields,w)?E(d,w,y(u,w)):p(w,y(d,w))}else{if(Oe&&L(s))for(const v of f.mount){const w=y(i,v);if(w&&w._f){const k=Array.isArray(w._f.refs)?w._f.refs[0]:w._f.ref;if(_e(k)){const j=k.closest("form");if(j){j.reset();break}}}}if(a.keepFieldsRef)for(const v of f.mount)p(v,y(d,v));else i={}}u=r.shouldUnregister?a.keepDefaultValues?U(n):{}:U(d),b.array.next({values:{...d}}),b.state.next({values:{...d}})}f={mount:a.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!g.isValid||!!a.keepIsValid||!!a.keepDirtyValues,o.watch=!!r.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:c?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ee(s,n)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&u?de(n,u):t.dirtyFields:a.keepDefaultValues&&s?de(n,s):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ge=(s,a)=>je(K(s)?s(u):s,a),kt=(s,a={})=>{const l=y(i,s),h=l&&l._f;if(h){const c=h.refs?h.refs[0]:h.ref;c.focus&&(c.focus(),a.shouldSelect&&K(c.select)&&c.select())}},St=s=>{t={...t,...s}},$e={control:{register:Ee,unregister:De,getFieldState:Ie,handleSubmit:He,setError:pe,_subscribe:We,_runSchema:re,_focusError:ke,_getWatch:x,_getDirty:z,_setValid:S,_setFieldArray:ne,_setDisabledField:qe,_setErrors:N,_getFieldArray:D,_reset:je,_resetDefaultValues:()=>K(r.defaultValues)&&r.defaultValues().then(s=>{Ge(s,r.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:Dt,_subjects:b,_proxyFormState:g,get _fields(){return i},get _formValues(){return u},get _state(){return o},set _state(s){o=s},get _defaultValues(){return n},get _names(){return f},set _names(s){f=s},get _formState(){return t},get _options(){return r},set _options(s){r={...r,...s}}},subscribe:wt,trigger:ue,register:Ee,handleSubmit:He,watch:At,setValue:p,getValues:ge,reset:Ge,resetField:Et,clearErrors:xt,unregister:De,setError:pe,setFocus:kt,getFieldState:Ie};return{...$e,formControl:$e}}function cr(e={}){const r=V.useRef(void 0),t=V.useRef(void 0),[i,n]=V.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});if(!r.current)if(e.formControl)r.current={...e.formControl,formState:i},e.defaultValues&&!K(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...f}=sr(e);r.current={...f,formState:i}}const u=r.current.control;return u._options=e,Pe(()=>{const o=u._subscribe({formState:u._proxyFormState,callback:()=>n({...u._formState}),reRenderRoot:!0});return n(f=>({...f,isReady:!0})),u._formState.isReady=!0,o},[u]),V.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),V.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),V.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),V.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),V.useEffect(()=>{if(u._proxyFormState.isDirty){const o=u._getDirty();o!==i.isDirty&&u._subjects.state.next({isDirty:o})}},[u,i.isDirty]),V.useEffect(()=>{e.values&&!ee(e.values,t.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),t.current=e.values,n(o=>({...o}))):u._resetDefaultValues()},[u,e.values]),V.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),r.current.formState=ft(i,u),r.current}var nt=function(e,r,t){if(e&&"reportValidity"in e){var i=y(t,r);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Vt=function(e,r){var t=function(n){var u=r.fields[n];u&&u.ref&&"reportValidity"in u.ref?nt(u.ref,n,e):u.refs&&u.refs.forEach(function(o){return nt(o,n,e)})};for(var i in r.fields)t(i)},ir=function(e,r){r.shouldUseNativeValidation&&Vt(e,r);var t={};for(var i in e){var n=y(r.fields,i);E(t,i,Object.assign(e[i],{ref:n&&n.ref}))}return t},yr=function(e,r,t){return r===void 0&&(r={}),t===void 0&&(t={}),function(i,n,u){try{return Promise.resolve(function(o,f){try{var F=(r.context,Promise.resolve(e[t.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},r,{context:n}))).then(function(_){return u.shouldUseNativeValidation&&Vt({},u),{values:t.rawValues?i:_,errors:{}}}))}catch(_){return f(_)}return F&&F.then?F.then(void 0,f):F}(0,function(o){if(!o.inner)throw o;return{values:{},errors:ir((f=o,F=!u.shouldUseNativeValidation&&u.criteriaMode==="all",(f.inner||[]).reduce(function(_,g){if(_[g.path]||(_[g.path]={message:g.message,type:g.type}),F){var A=_[g.path].types,b=A&&A[g.type];_[g.path]=yt(g.path,F,_,g.type,b?[].concat(b,g.message):g.message)}return _},{})),u)};var f,F}))}catch(o){return Promise.reject(o)}}};const Ft=({colSpan:e,children:r})=>X(ut,{item:!0,xs:typeof e=="number"?e:(e==null?void 0:e.xs)??12,sm:typeof e=="number"||e==null?void 0:e.sm,md:typeof e=="number"||e==null?void 0:e.md,children:r}),ar={color:"text.secondary",mb:1};Ot("span")(({theme:e})=>({opacity:.5}));const hr=({onSubmit:e,columns:r,children:t,hf:i})=>{const n=async u=>{try{await e(u)}catch(o){console.error(o)}};return X(Wt,{...i,children:X("form",{onSubmit:i.handleSubmit(n),children:X(nr,{columns:r,children:t})})})},nr=({columns:e=12,children:r})=>X(ut,{container:!0,columns:e,spacing:2,children:r}),gr=e=>{const r=Ae();return X(Rt,{variant:"contained",type:"submit",disabled:r.formState.isSubmitting,loading:r.formState.isSubmitting,...e})},vr=({children:e,colSpan:r=12})=>X(Ft,{colSpan:r,children:X(Ut,{direction:"row",gap:2,justifyContent:"flex-end",children:e})}),mr=({label:e,colSpan:r,placeholder:t,field:i,fieldState:n,floatingLabel:u=!1,formState:o,required:f,...F})=>{var g;const _=Mt.useId();return Pt(Ft,{colSpan:r,children:[u?null:X(Nt,{htmlFor:_,sx:ar,error:!!n.error,children:e}),X(Bt,{...i,id:_,fullWidth:!0,label:u?e:void 0,placeholder:t,error:!!n.error,helperText:((g=n.error)==null?void 0:g.message)??"",...F})]})};export{fr as C,Ft as G,ar as I,hr as T,mr as a,vr as b,gr as c,yr as o,cr as u};
